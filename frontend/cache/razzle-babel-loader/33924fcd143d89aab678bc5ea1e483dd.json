{"ast":null,"code":"import _objectSpread from \"/home/valentina/Plone/plone-conference/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _join from \"lodash/join\";\nvar __jsx = React.createElement;\n\n/**\n * Html helper.\n * @module helpers/Html\n */\nimport React, { Component } from 'react';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport serialize from 'serialize-javascript';\nimport BodyClass from '@plone/volto/helpers/BodyClass/BodyClass';\nimport { runtimeConfig } from '@plone/volto/runtime_config';\nimport config from '@plone/volto/registry';\nconst CRITICAL_CSS_TEMPLATE = `function alter() {\n  document.querySelectorAll(\"head link[rel='prefetch']\").forEach(function(el) { el.rel = 'stylesheet'});\n}\nif (window.addEventListener) {\n  window.addEventListener('DOMContentLoaded', alter, false)\n} else {\n  window.onload=alter\n}`;\nexport const loadReducers = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    settings\n  } = config;\n  return Object.assign({}, ...Object.keys(state).map(name => settings.initialReducersBlacklist.includes(name) ? {} : {\n    [name]: state[name]\n  }));\n};\n/**\n * Html class.\n * Wrapper component containing HTML metadata and boilerplate tags.\n * Used in server-side code only to wrap the string output of the\n * rendered route component.\n *\n * The only thing this component doesn't (and can't) include is the\n * HTML doctype declaration, which is added to the rendered output\n * by the server.js file.\n *\n * Critical.css behaviour: when a file `public/critical.css` is present, the\n * loading of stylesheets is changed. The styles in critical.css are inlined in\n * the generated HTML, and the whole story needs to change completely: instead\n * of treating stylesheets as priority for rendering, we want to defer their\n * loading as much as possible. So we change the stylesheets to be prefetched\n * and we switch their rel back to stylesheets at document ready event.\n *\n * @function Html\n * @param {Object} props Component properties.\n * @param {Object} props.assets Assets to be rendered.\n * @param {Object} props.component Content to be rendered as child node.\n * @param {Object} props.store Store object.\n * @returns {string} Markup of the not found page.\n */\n\n/**\n * Html class.\n * @class Html\n * @extends Component\n */\n\nclass Html extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const {\n      extractor,\n      markup,\n      store,\n      criticalCss,\n      apiPath,\n      publicURL\n    } = this.props;\n    const head = Helmet.rewind();\n\n    const bodyClass = _join(BodyClass.rewind(), ' ');\n\n    return __jsx(\"html\", {\n      lang: \"en\"\n    }, __jsx(\"head\", null, __jsx(\"meta\", {\n      charSet: \"utf-8\"\n    }), head.base.toComponent(), head.title.toComponent(), head.meta.toComponent(), head.link.toComponent(), head.script.toComponent(), __jsx(\"script\", {\n      dangerouslySetInnerHTML: {\n        __html: `window.env = ${serialize(_objectSpread(_objectSpread(_objectSpread({}, runtimeConfig), apiPath && {\n          apiPath\n        }), publicURL && {\n          publicURL\n        }))};`\n      }\n    }), __jsx(\"link\", {\n      rel: \"icon\",\n      href: \"/favicon.ico\",\n      sizes: \"any\"\n    }), __jsx(\"link\", {\n      rel: \"icon\",\n      href: \"/icon.svg\",\n      type: \"image/svg+xml\"\n    }), __jsx(\"link\", {\n      rel: \"apple-touch-icon\",\n      sizes: \"180x180\",\n      href: \"/apple-touch-icon.png\"\n    }), __jsx(\"link\", {\n      rel: \"manifest\",\n      href: \"/site.webmanifest\"\n    }), __jsx(\"meta\", {\n      name: \"generator\",\n      content: \"Plone 6 - https://plone.org\"\n    }), __jsx(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1\"\n    }), __jsx(\"meta\", {\n      name: \"apple-mobile-web-app-capable\",\n      content: \"yes\"\n    }), true && criticalCss && __jsx(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: this.props.criticalCss\n      }\n    }), extractor.getLinkElements().map(elem => /*#__PURE__*/React.cloneElement(elem, {\n      crossOrigin: true ? undefined : 'true',\n      rel: !criticalCss ? elem.props.rel : elem.props.as === 'style' ? 'prefetch' : elem.props.rel\n    })), true ? criticalCss ? __jsx(React.Fragment, null, __jsx(\"script\", {\n      dangerouslySetInnerHTML: {\n        __html: CRITICAL_CSS_TEMPLATE\n      }\n    }), extractor.getStyleElements().map(elem => __jsx(\"noscript\", null, /*#__PURE__*/React.cloneElement(elem, {\n      rel: 'stylesheet',\n      crossOrigin: true ? undefined : 'true'\n    })))) : extractor.getStyleElements() : undefined), __jsx(\"body\", {\n      className: bodyClass\n    }, __jsx(\"div\", {\n      role: \"navigation\",\n      \"aria-label\": \"Toolbar\",\n      id: \"toolbar\"\n    }), __jsx(\"div\", {\n      id: \"main\",\n      dangerouslySetInnerHTML: {\n        __html: markup\n      }\n    }), __jsx(\"div\", {\n      id: \"sidebar\"\n    }), __jsx(\"script\", {\n      dangerouslySetInnerHTML: {\n        __html: `window.__data=${serialize(loadReducers(store.getState()))};`\n      },\n      charSet: \"UTF-8\"\n    }), this.props.extractScripts !== false ? extractor.getScriptElements().map(elem => /*#__PURE__*/React.cloneElement(elem, {\n      crossOrigin: true ? undefined : 'true'\n    })) : ''));\n  }\n\n}\n\nexport default Html;","map":{"version":3,"names":["React","Component","Helmet","serialize","BodyClass","runtimeConfig","config","CRITICAL_CSS_TEMPLATE","loadReducers","state","settings","Object","assign","keys","map","name","initialReducersBlacklist","includes","Html","render","extractor","markup","store","criticalCss","apiPath","publicURL","props","head","rewind","bodyClass","base","toComponent","title","meta","link","script","__html","getLinkElements","elem","cloneElement","crossOrigin","undefined","rel","as","getStyleElements","getState","extractScripts","getScriptElements"],"sources":["/home/valentina/Plone/plone-conference/frontend/node_modules/@plone/volto/src/helpers/Html/Html.jsx"],"sourcesContent":["/**\n * Html helper.\n * @module helpers/Html\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport serialize from 'serialize-javascript';\nimport { join } from 'lodash';\nimport BodyClass from '@plone/volto/helpers/BodyClass/BodyClass';\nimport { runtimeConfig } from '@plone/volto/runtime_config';\nimport config from '@plone/volto/registry';\n\nconst CRITICAL_CSS_TEMPLATE = `function alter() {\n  document.querySelectorAll(\"head link[rel='prefetch']\").forEach(function(el) { el.rel = 'stylesheet'});\n}\nif (window.addEventListener) {\n  window.addEventListener('DOMContentLoaded', alter, false)\n} else {\n  window.onload=alter\n}`;\n\nexport const loadReducers = (state = {}) => {\n  const { settings } = config;\n  return Object.assign(\n    {},\n    ...Object.keys(state).map((name) =>\n      settings.initialReducersBlacklist.includes(name)\n        ? {}\n        : { [name]: state[name] },\n    ),\n  );\n};\n\n/**\n * Html class.\n * Wrapper component containing HTML metadata and boilerplate tags.\n * Used in server-side code only to wrap the string output of the\n * rendered route component.\n *\n * The only thing this component doesn't (and can't) include is the\n * HTML doctype declaration, which is added to the rendered output\n * by the server.js file.\n *\n * Critical.css behaviour: when a file `public/critical.css` is present, the\n * loading of stylesheets is changed. The styles in critical.css are inlined in\n * the generated HTML, and the whole story needs to change completely: instead\n * of treating stylesheets as priority for rendering, we want to defer their\n * loading as much as possible. So we change the stylesheets to be prefetched\n * and we switch their rel back to stylesheets at document ready event.\n *\n * @function Html\n * @param {Object} props Component properties.\n * @param {Object} props.assets Assets to be rendered.\n * @param {Object} props.component Content to be rendered as child node.\n * @param {Object} props.store Store object.\n * @returns {string} Markup of the not found page.\n */\n\n/**\n * Html class.\n * @class Html\n * @extends Component\n */\nclass Html extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    extractor: PropTypes.shape({\n      getLinkElements: PropTypes.func.isRequired,\n      getScriptElements: PropTypes.func.isRequired,\n      getStyleElements: PropTypes.func.isRequired,\n    }).isRequired,\n    markup: PropTypes.string.isRequired,\n    store: PropTypes.shape({\n      getState: PropTypes.func,\n    }).isRequired,\n  };\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const {\n      extractor,\n      markup,\n      store,\n      criticalCss,\n      apiPath,\n      publicURL,\n    } = this.props;\n    const head = Helmet.rewind();\n    const bodyClass = join(BodyClass.rewind(), ' ');\n    return (\n      <html lang=\"en\">\n        <head>\n          <meta charSet=\"utf-8\" />\n          {head.base.toComponent()}\n          {head.title.toComponent()}\n          {head.meta.toComponent()}\n          {head.link.toComponent()}\n          {head.script.toComponent()}\n\n          <script\n            dangerouslySetInnerHTML={{\n              __html: `window.env = ${serialize({\n                ...runtimeConfig,\n                // Seamless mode requirement, the client need to know where the API is located\n                // if not set in the API_PATH\n                ...(apiPath && {\n                  apiPath,\n                }),\n                ...(publicURL && {\n                  publicURL,\n                }),\n              })};`,\n            }}\n          />\n\n          <link rel=\"icon\" href=\"/favicon.ico\" sizes=\"any\" />\n          <link rel=\"icon\" href=\"/icon.svg\" type=\"image/svg+xml\" />\n          <link\n            rel=\"apple-touch-icon\"\n            sizes=\"180x180\"\n            href=\"/apple-touch-icon.png\"\n          />\n          <link rel=\"manifest\" href=\"/site.webmanifest\" />\n          <meta name=\"generator\" content=\"Plone 6 - https://plone.org\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n          {process.env.NODE_ENV === 'production' && criticalCss && (\n            <style\n              dangerouslySetInnerHTML={{ __html: this.props.criticalCss }}\n            />\n          )}\n          {/* Add the crossorigin while in development */}\n          {extractor.getLinkElements().map((elem) =>\n            React.cloneElement(elem, {\n              crossOrigin:\n                process.env.NODE_ENV === 'production' ? undefined : 'true',\n              rel: !criticalCss\n                ? elem.props.rel\n                : elem.props.as === 'style'\n                ? 'prefetch'\n                : elem.props.rel,\n            }),\n          )}\n          {/* Styles in development are loaded with Webpack's style-loader, in production,\n              they need to be static*/}\n          {process.env.NODE_ENV === 'production' ? (\n            criticalCss ? (\n              <>\n                <script\n                  dangerouslySetInnerHTML={{\n                    __html: CRITICAL_CSS_TEMPLATE,\n                  }}\n                ></script>\n                {extractor.getStyleElements().map((elem) => (\n                  <noscript>\n                    {React.cloneElement(elem, {\n                      rel: 'stylesheet',\n                      crossOrigin:\n                        process.env.NODE_ENV === 'production'\n                          ? undefined\n                          : 'true',\n                    })}\n                  </noscript>\n                ))}\n              </>\n            ) : (\n              extractor.getStyleElements()\n            )\n          ) : undefined}\n        </head>\n        <body className={bodyClass}>\n          <div role=\"navigation\" aria-label=\"Toolbar\" id=\"toolbar\" />\n          <div id=\"main\" dangerouslySetInnerHTML={{ __html: markup }} />\n          <div id=\"sidebar\" />\n          <script\n            dangerouslySetInnerHTML={{\n              __html: `window.__data=${serialize(\n                loadReducers(store.getState()),\n              )};`,\n            }}\n            charSet=\"UTF-8\"\n          />\n          {/* Add the crossorigin while in development */}\n          {this.props.extractScripts !== false\n            ? extractor.getScriptElements().map((elem) =>\n                React.cloneElement(elem, {\n                  crossOrigin:\n                    process.env.NODE_ENV === 'production' ? undefined : 'true',\n                }),\n              )\n            : ''}\n        </body>\n      </html>\n    );\n  }\n}\n\nexport default Html;\n"],"mappings":";;;;AAAA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AAEA,OAAOC,SAAP,MAAsB,0CAAtB;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AAEA,MAAMC,qBAAqB,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,EAPA;AASA,OAAO,MAAMC,YAAY,GAAG,YAAgB;EAAA,IAAfC,KAAe,uEAAP,EAAO;EAC1C,MAAM;IAAEC;EAAF,IAAeJ,MAArB;EACA,OAAOK,MAAM,CAACC,MAAP,CACL,EADK,EAEL,GAAGD,MAAM,CAACE,IAAP,CAAYJ,KAAZ,EAAmBK,GAAnB,CAAwBC,IAAD,IACxBL,QAAQ,CAACM,wBAAT,CAAkCC,QAAlC,CAA2CF,IAA3C,IACI,EADJ,GAEI;IAAE,CAACA,IAAD,GAAQN,KAAK,CAACM,IAAD;EAAf,CAHH,CAFE,CAAP;AAQD,CAVM;AAYP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACA,MAAMG,IAAN,SAAmBjB,SAAnB,CAA6B;EAC3B;AACF;AACA;AACA;AACA;;EAaE;AACF;AACA;AACA;AACA;EACEkB,MAAM,GAAG;IACP,MAAM;MACJC,SADI;MAEJC,MAFI;MAGJC,KAHI;MAIJC,WAJI;MAKJC,OALI;MAMJC;IANI,IAOF,KAAKC,KAPT;IAQA,MAAMC,IAAI,GAAGzB,MAAM,CAAC0B,MAAP,EAAb;;IACA,MAAMC,SAAS,GAAG,MAAKzB,SAAS,CAACwB,MAAV,EAAL,EAAyB,GAAzB,CAAlB;;IACA,OACE;MAAM,IAAI,EAAC;IAAX,GACE,oBACE;MAAM,OAAO,EAAC;IAAd,EADF,EAEGD,IAAI,CAACG,IAAL,CAAUC,WAAV,EAFH,EAGGJ,IAAI,CAACK,KAAL,CAAWD,WAAX,EAHH,EAIGJ,IAAI,CAACM,IAAL,CAAUF,WAAV,EAJH,EAKGJ,IAAI,CAACO,IAAL,CAAUH,WAAV,EALH,EAMGJ,IAAI,CAACQ,MAAL,CAAYJ,WAAZ,EANH,EAQE;MACE,uBAAuB,EAAE;QACvBK,MAAM,EAAG,gBAAejC,SAAS,+CAC5BE,aAD4B,GAI3BmB,OAAO,IAAI;UACbA;QADa,CAJgB,GAO3BC,SAAS,IAAI;UACfA;QADe,CAPc,EAU9B;MAXoB;IAD3B,EARF,EAwBE;MAAM,GAAG,EAAC,MAAV;MAAiB,IAAI,EAAC,cAAtB;MAAqC,KAAK,EAAC;IAA3C,EAxBF,EAyBE;MAAM,GAAG,EAAC,MAAV;MAAiB,IAAI,EAAC,WAAtB;MAAkC,IAAI,EAAC;IAAvC,EAzBF,EA0BE;MACE,GAAG,EAAC,kBADN;MAEE,KAAK,EAAC,SAFR;MAGE,IAAI,EAAC;IAHP,EA1BF,EA+BE;MAAM,GAAG,EAAC,UAAV;MAAqB,IAAI,EAAC;IAA1B,EA/BF,EAgCE;MAAM,IAAI,EAAC,WAAX;MAAuB,OAAO,EAAC;IAA/B,EAhCF,EAiCE;MAAM,IAAI,EAAC,UAAX;MAAsB,OAAO,EAAC;IAA9B,EAjCF,EAkCE;MAAM,IAAI,EAAC,8BAAX;MAA0C,OAAO,EAAC;IAAlD,EAlCF,EAmCG,QAAyCF,WAAzC,IACC;MACE,uBAAuB,EAAE;QAAEa,MAAM,EAAE,KAAKV,KAAL,CAAWH;MAArB;IAD3B,EApCJ,EAyCGH,SAAS,CAACiB,eAAV,GAA4BvB,GAA5B,CAAiCwB,IAAD,iBAC/BtC,KAAK,CAACuC,YAAN,CAAmBD,IAAnB,EAAyB;MACvBE,WAAW,EACT,OAAwCC,SAAxC,GAAoD,MAF/B;MAGvBC,GAAG,EAAE,CAACnB,WAAD,GACDe,IAAI,CAACZ,KAAL,CAAWgB,GADV,GAEDJ,IAAI,CAACZ,KAAL,CAAWiB,EAAX,KAAkB,OAAlB,GACA,UADA,GAEAL,IAAI,CAACZ,KAAL,CAAWgB;IAPQ,CAAzB,CADD,CAzCH,EAsDG,OACCnB,WAAW,GACT,4BACE;MACE,uBAAuB,EAAE;QACvBa,MAAM,EAAE7B;MADe;IAD3B,EADF,EAMGa,SAAS,CAACwB,gBAAV,GAA6B9B,GAA7B,CAAkCwB,IAAD,IAChC,qCACGtC,KAAK,CAACuC,YAAN,CAAmBD,IAAnB,EAAyB;MACxBI,GAAG,EAAE,YADmB;MAExBF,WAAW,EACT,OACIC,SADJ,GAEI;IALkB,CAAzB,CADH,CADD,CANH,CADS,GAoBTrB,SAAS,CAACwB,gBAAV,EArBH,GAuBGH,SA7EN,CADF,EAgFE;MAAM,SAAS,EAAEZ;IAAjB,GACE;MAAK,IAAI,EAAC,YAAV;MAAuB,cAAW,SAAlC;MAA4C,EAAE,EAAC;IAA/C,EADF,EAEE;MAAK,EAAE,EAAC,MAAR;MAAe,uBAAuB,EAAE;QAAEO,MAAM,EAAEf;MAAV;IAAxC,EAFF,EAGE;MAAK,EAAE,EAAC;IAAR,EAHF,EAIE;MACE,uBAAuB,EAAE;QACvBe,MAAM,EAAG,iBAAgBjC,SAAS,CAChCK,YAAY,CAACc,KAAK,CAACuB,QAAN,EAAD,CADoB,CAEhC;MAHqB,CAD3B;MAME,OAAO,EAAC;IANV,EAJF,EAaG,KAAKnB,KAAL,CAAWoB,cAAX,KAA8B,KAA9B,GACG1B,SAAS,CAAC2B,iBAAV,GAA8BjC,GAA9B,CAAmCwB,IAAD,iBAChCtC,KAAK,CAACuC,YAAN,CAAmBD,IAAnB,EAAyB;MACvBE,WAAW,EACT,OAAwCC,SAAxC,GAAoD;IAF/B,CAAzB,CADF,CADH,GAOG,EApBN,CAhFF,CADF;EAyGD;;AA3I0B;;AA8I7B,eAAevB,IAAf"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}