{"ast":null,"code":"import _map from \"lodash/map\";\nimport { v4 as uuid } from 'uuid';\nimport { emptyBlocksForm } from '@plone/volto/helpers';\nimport { getBlocksFieldname, getBlocksLayoutFieldname, blockHasValue } from '@plone/volto/helpers';\nexport const emptyAccordion = count => {\n  const blocks = {};\n  const items = [];\n\n  for (let x = 0; x < count; x++) {\n    const id = uuid();\n    blocks[id] = emptyBlocksForm();\n    items.push(id);\n  }\n\n  return {\n    blocks,\n    blocks_layout: {\n      items\n    }\n  };\n};\nexport const getPanels = data => {\n  var _data$blocks_layout;\n\n  return ((data === null || data === void 0 ? void 0 : (_data$blocks_layout = data.blocks_layout) === null || _data$blocks_layout === void 0 ? void 0 : _data$blocks_layout.items) || []).map(id => {\n    var _data$blocks;\n\n    return [id, (_data$blocks = data.blocks) === null || _data$blocks === void 0 ? void 0 : _data$blocks[id]];\n  });\n};\nexport const accordionBlockHasValue = content => {\n  const blocksFieldname = getBlocksFieldname(content);\n  const blocksLayoutFieldname = getBlocksLayoutFieldname(content);\n\n  const blockValue = _map(content[blocksLayoutFieldname].items, block => {\n    var _content$blocksFieldn;\n\n    const blockData = (_content$blocksFieldn = content[blocksFieldname]) === null || _content$blocksFieldn === void 0 ? void 0 : _content$blocksFieldn[block];\n    return blockHasValue(blockData);\n  });\n\n  if (content.hasOwnProperty('title') && (content === null || content === void 0 ? void 0 : content.title.length) > 0) return true;\n  return blockValue.some(item => item === true);\n};","map":{"version":3,"names":["v4","uuid","emptyBlocksForm","getBlocksFieldname","getBlocksLayoutFieldname","blockHasValue","emptyAccordion","count","blocks","items","x","id","push","blocks_layout","getPanels","data","map","accordionBlockHasValue","content","blocksFieldname","blocksLayoutFieldname","blockValue","block","blockData","hasOwnProperty","title","length","some","item"],"sources":["/home/valentina/Plone/plone-conference/frontend/node_modules/@eeacms/volto-accordion-block/src/components/manage/Blocks/Accordion/util.js"],"sourcesContent":["import { v4 as uuid } from 'uuid';\nimport { emptyBlocksForm } from '@plone/volto/helpers';\nimport { map } from 'lodash';\n\nimport {\n  getBlocksFieldname,\n  getBlocksLayoutFieldname,\n  blockHasValue,\n} from '@plone/volto/helpers';\n\nexport const emptyAccordion = (count) => {\n  const blocks = {};\n  const items = [];\n  for (let x = 0; x < count; x++) {\n    const id = uuid();\n    blocks[id] = emptyBlocksForm();\n    items.push(id);\n  }\n\n  return {\n    blocks,\n    blocks_layout: {\n      items,\n    },\n  };\n};\n\nexport const getPanels = (data) => {\n  return (data?.blocks_layout?.items || []).map((id) => [\n    id,\n    data.blocks?.[id],\n  ]);\n};\n\nexport const accordionBlockHasValue = (content) => {\n  const blocksFieldname = getBlocksFieldname(content);\n  const blocksLayoutFieldname = getBlocksLayoutFieldname(content);\n  const blockValue = map(content[blocksLayoutFieldname].items, (block) => {\n    const blockData = content[blocksFieldname]?.[block];\n    return blockHasValue(blockData);\n  });\n  if (content.hasOwnProperty('title') && content?.title.length > 0) return true;\n  return blockValue.some((item) => item === true);\n};\n"],"mappings":";AAAA,SAASA,EAAE,IAAIC,IAAf,QAA2B,MAA3B;AACA,SAASC,eAAT,QAAgC,sBAAhC;AAGA,SACEC,kBADF,EAEEC,wBAFF,EAGEC,aAHF,QAIO,sBAJP;AAMA,OAAO,MAAMC,cAAc,GAAIC,KAAD,IAAW;EACvC,MAAMC,MAAM,GAAG,EAAf;EACA,MAAMC,KAAK,GAAG,EAAd;;EACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAApB,EAA2BG,CAAC,EAA5B,EAAgC;IAC9B,MAAMC,EAAE,GAAGV,IAAI,EAAf;IACAO,MAAM,CAACG,EAAD,CAAN,GAAaT,eAAe,EAA5B;IACAO,KAAK,CAACG,IAAN,CAAWD,EAAX;EACD;;EAED,OAAO;IACLH,MADK;IAELK,aAAa,EAAE;MACbJ;IADa;EAFV,CAAP;AAMD,CAfM;AAiBP,OAAO,MAAMK,SAAS,GAAIC,IAAD,IAAU;EAAA;;EACjC,OAAO,CAAC,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,mCAAAA,IAAI,CAAEF,aAAN,4EAAqBJ,KAArB,KAA8B,EAA/B,EAAmCO,GAAnC,CAAwCL,EAAD;IAAA;;IAAA,OAAQ,CACpDA,EADoD,kBAEpDI,IAAI,CAACP,MAF+C,iDAEpD,aAAcG,EAAd,CAFoD,CAAR;EAAA,CAAvC,CAAP;AAID,CALM;AAOP,OAAO,MAAMM,sBAAsB,GAAIC,OAAD,IAAa;EACjD,MAAMC,eAAe,GAAGhB,kBAAkB,CAACe,OAAD,CAA1C;EACA,MAAME,qBAAqB,GAAGhB,wBAAwB,CAACc,OAAD,CAAtD;;EACA,MAAMG,UAAU,GAAG,KAAIH,OAAO,CAACE,qBAAD,CAAP,CAA+BX,KAAnC,EAA2Ca,KAAD,IAAW;IAAA;;IACtE,MAAMC,SAAS,4BAAGL,OAAO,CAACC,eAAD,CAAV,0DAAG,sBAA2BG,KAA3B,CAAlB;IACA,OAAOjB,aAAa,CAACkB,SAAD,CAApB;EACD,CAHkB,CAAnB;;EAIA,IAAIL,OAAO,CAACM,cAAR,CAAuB,OAAvB,KAAmC,CAAAN,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEO,KAAT,CAAeC,MAAf,IAAwB,CAA/D,EAAkE,OAAO,IAAP;EAClE,OAAOL,UAAU,CAACM,IAAX,CAAiBC,IAAD,IAAUA,IAAI,KAAK,IAAnC,CAAP;AACD,CATM"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}